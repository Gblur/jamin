<div class="col-4 bg-white shadow">
  <h4 class="text-center my-4">Messages</h4>
  <div class="messages-list border-bottom mb-4" style="overflow-x: scroll; height: 360px">
      <% @jam_session.messages.each do |message| %>
          <%= render "messages/message", message: message %>
      <% end %>
  </div>

  <div class="messages-input">
    <%= simple_form_for([@jam_session, Message.new], remote: true, method: :post )do |f| %>
      <%= f.input :content, label: false %>
      <%= f.submit 'Send', class: "btn btn-primary btn-sm searchbtn" %>
    <% end %>
  </div>
</div>
<%= content_for :after_js do %>
  <script>
    App['chat_room_<%= @jam_session.id %>'] = App.cable.subscriptions.create({ channel: 'JamSessionsChannel',
      jam_session_id: <%= @jam_session.id %> }, {
        received: (data) => {
          const messagesContainer = document.querySelector('.messages-list');
          messagesContainer.insertAdjacentHTML('beforeend', data.message_partial);
        }
      })
  </script>
<% end %>






<!--     <div class="form-group text-right ">
      <textarea placeholder="Type your message here" class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
      <button type="submit" class="btn btn-primary btn-sm searchbtn mt-4">Send</button>
    </div> -->
